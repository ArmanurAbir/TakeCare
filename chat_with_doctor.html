<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TakeCare - Chat with Doctor</title>
  <link rel="icon" href="images/takecarelogo.jpg">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="styles.css" />
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
</head>

<body>
  <!-- Header -->
  <table width="100%" class="header-table py-2 bg-light border-bottom">
    <tr>
      <td width="15%" align="center">

      </td>
      <td width="30%" align="right">
        <img src="images/takecarelogo.jpg" width="100" alt="TakeCare" />
      </td>
      <td width="30%" class="brand-info" align="left">
        <h1><b>TakeCare</b></h1>
        <h5>Wellbeing Made Simple</h5>
      </td>
      <td width="20%" align="center">
        <form class="d-flex justify-content-center" action="#" method="POST">
          <input class="form-control" type="search" placeholder="Search TakeCare Features" />
          <button class="btn btn-outline-primary ms-2" type="submit">Search</button>
        </form>
      </td>
      <td width="10%"></td>
    </tr>
  </table>

  <!-- Chat with Doctor Section -->
  <div class="container mt-5">
    <div class="row">
      <!-- Left Side: Options and Chat -->
      <div class="col-md-6">
        <h3 class="mb-4 text-primary"><b>Virtual Doctor</b></h3>

        <!-- Chat Box -->
        <div class="border p-3 rounded bg-light" style="height: 300px; overflow-y: auto;" id="chatBox">
          <div class="text-muted small">ðŸ¤– Hello! I'm Dr. CareBot. Ask me anything about your symptoms or needs.</div>
        </div>

        <!-- Chat Input -->
        <div class="input-group mt-3">
          <input type="text" id="chatInput" class="form-control" placeholder="Type your message..." />
          <button id="sendBtn" class="btn btn-primary">Send</button>
        </div>
      </div>

      <!-- Right Side: Image -->
      <div class="col-md-6 text-center">
        <img src="images/doctorbot.jpg" alt="Doctor" class="img-fluid rounded shadow" style="max-height: 400px;" />
      </div>
    </div>

    <!-- Back to Home Button -->
    <div class="text-center mt-4">
      <a href="index.html" class="btn btn-primary">â¬… Back to Home</a>
    </div>
  </div>

  <!-- Chatbot Script -->
  <script>
    $(document).ready(function () {
      function sendMessage() {
        const $input = $("#chatInput");
        const $chatBox = $("#chatBox");
        const userMessage = $input.val().trim();

        if (userMessage === "") return;

        // Append user message
        const $userBubble = $('<div class="text-end my-1"><span class="badge bg-secondary"></span></div>');
        $userBubble.find("span").text(userMessage);
        $chatBox.append($userBubble);

        // Generate bot reply
        const botReply = getBotReply(userMessage);
        const $botBubble = $('<div class="text-muted small my-1"></div>').text(`ðŸ¤– ${botReply}`);
        $chatBox.append($botBubble);

        // Scroll to bottom
        $chatBox.scrollTop($chatBox[0].scrollHeight);

        $input.val("");
      }

      function getBotReply(message) {
        message = message.toLowerCase();

        if (message.includes("hello") || message.includes("hi")) {
          return "Hi there! ðŸ˜Š How can I assist you with your health today?";
        } else if (message.includes("doctor")) {
          return "You are now chatting with a virtual doctor assistant. Please describe your symptoms.";
        } else if (message.includes("symptom")) {
          return "Try describing your symptom in detail, and I can help guide you.";
        } else if (message.includes("emergency")) {
          return "If this is an emergency, please go to the Emergency Services section immediately.";
        } else {
          return "I'm here to help. ðŸ˜Š Try asking about symptoms, doctor availability, or health concerns.";
        }
      }

      $("#sendBtn").on("click", sendMessage);

      $("#chatInput").on("keypress", function (e) {
        if (e.which === 13) {
          e.preventDefault();
          sendMessage();
        }
      });
    });
  </script>
</body>

</html>
